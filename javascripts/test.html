<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Acceptance client-side tests</title>
    <script src="prototype-1.6.0.2.js" type="text/javascript" charset="utf-8"></script>
    <script src="acceptance.js" type="text/javascript" charset="utf-8"></script>
    <style type="text/css" media="screen">
        .field { border-bottom: 1px solid #ccc; padding: 0 0 12px; margin: 0 0 12px; }
        label { font: bold 13px Arial, sans-serif; }
        label.invalid { color: #f60; }
    </style>
</head>
<body>
    
    <h1>Acceptance client-side tests</h1>
    
    <script type="text/javascript" charset="utf-8">
        Acceptance(function() { with(this) {
            
            form('the-form')
                .requires('username')   .toHaveLength({minimum: 4})
                .expects('title')       .toBeOneOf(['Mr', 'Mrs'], 'must be a suitable title')
                .requires('email')      .toMatch(EMAIL_FORMAT)
                .expects('email_conf')  .toConfirm('email')
                .requires('age', 'The years').toBeNumeric()
                .expects('tickets')     .toHaveValue({minimum: 4, maximum: 8})
                .expects('accept')      .toBeChecked();
            
            before('the-form').isValidated(function(data) {
                data.username = data.username.toUpperCase();
                data.title = data.title.charAt(0).toUpperCase() + data.title.slice(1).toLowerCase();
                if (!data.accept) data.accept = !data.accept;
            });
            
            when('the-form').isValidated(function(errors) {
                window.console && console.log(errors.pluck('message'));
            });
        }});
    </script>
    
    <form id="the-form" action="" method="get" accept-charset="utf-8">
        <div class="field">
            <label for="username">Your username</label>
            <input name="username" id="username" />
        </div>
        <div class="field">
            <label for="title">Title</label>
            <input name="title" id="title" />
        </div>
        <div class="field">
            <label>Email address
                <input type="text" name="email" />
            </label>
        </div>
        <div class="field">
            <label for="email_conf">Confirm</label>
            <input type="text" name="email_conf" id="email_conf" />
        </div>
        <div class="field">
            Age
            <input type="text" name="age" />
        </div>
        <div class="field">
            <label for="tickets">No. tickets</label>
            <input type="text" name="tickets" id="tickets" />
        </div>
        <div class="field">
            <label for="accept">Accept?</label>
            <input type="checkbox" name="accept" id="accept" />
        </div>
        <input type="submit" value="Go on, sign up" />
    </form>
    
    <script type="text/javascript" charset="utf-8">
        Acceptance.reattach();
    </script>
    
</body>
</html>
