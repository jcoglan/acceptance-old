var Acceptance=(function(){var k=function(a){a.apply(A)};var h={};var i=function(a){return h[a]||(h[a]=new n(a))};Object.extend(k,{reattach:function(){var a=0;for(var b in h){if(h[b]._5())++a}return a}});var s=/^\-?(0|[1-9]\d*)(\.\d+)?(e[\+\-]?\d+)?$/i;var r=/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum)\b$/i;var t=function(a){return a?false:(String(a).strip()=='')};var l=function(a){return s.test(String(a))};var o=function(a){return!t(a)||['is required']};var u=function(b){b=$(b);if(!b)return null;var c=b.ancestors().find(function(a){return a.match('label')});if(c)return c;var d=b.id;if(!d)return null;return $$('label[for='+d+']')[0]||null};var p=function(a){var b=$(a).serialize(true);for(var c in b){if(b[c]instanceof Array)b[c]=b[c][0]}return b};var q=function(b,c){var d,f,e=b[0];switch(true){case b.all(function(a){return a.match('[type=radio]')}):d=b.find(function(a){return a.value==c});if(!d)return;b.each(function(a){a.checked=false});d.checked=true;break;case e.match('[type=checkbox]'):e.checked=!!(c===true||c==e.value);break;case e.match('select'):f=$A(e.options);d=f.find(function(a){return a.value==c});if(!d)return;f.each(function(a){a.selected=false});d.selected=true;break;case e.match('input'):case e.match('[type=hidden]'):case e.match('textarea'):e.value=String(c);break}};var A={form:function(a){return i(a)._8||null},when:function(a){return i(a)._z||null},before:function(a){return i(a)._r||null},displayErrorsIn:function(){},displayResponseIn:function(){},EMAIL_FORMAT:r};var j=Class.create({initialize:function(a){this._0=a},requires:function(a,b){var c=this._0._n(a);if(b)this._0._9[a]=b;return c._8},validates:function(a){this._0._j.push(a);return this},submitsUsingAjax:function(){this._0._a=true;return this}});j.prototype.expects=j.prototype.requires;FormDSLMethods=['requires','expects','validates','submitsUsingAjax'];var m=Class.create({initialize:function(a){this._1=a},toBeChecked:function(c){var d=this._1;this._1._2(function(a){var b=d._o[0];return(a==b.value&&b.checked)||[c||'must be checked']});return this},toBeNumeric:function(b){this._1._2(function(a){return l(a)||[b||'must be a number']});return this},toBeOneOf:function(b,c){this._1._2(function(a){return b.include(a)||[c||'is not valid']});return this},toConfirm:function(c,d){this._1._2(function(a,b){return a==b.get(c)||[d||'must be confirmed',c]});return this},toHaveLength:function(b,c){var d=b.minimum,f=b.maximum;this._1._2(function(a){return(typeof b=='number'&&a.length!=b&&[c||'must contain exactly '+b+' characters'])||(d!==undefined&&a.length<d&&[c||'must contain at least '+d+' characters'])||(f!==undefined&&a.length>f&&[c||'must contain no more than '+f+' characters'])||true});return this},toHaveValue:function(b,c){var d=b.minimum,f=b.maximum;this._1._2(function(a){if(!l(a))return[c||'must be a number'];a=Number(a);return(d!==undefined&&a<d&&[c||'must be at least '+d])||(f!==undefined&&a>f&&[c||'must not be greater than '+f])||true});return this},toMatch:function(b,c){this._1._2(function(a){return b.test(a)||[c||'is not valid']});return this}});FormDSLMethods.each(function(b){m.prototype[b]=function(){var a=this._1._0._8;return a[b].apply(a,arguments)}});var v=Class.create({initialize:function(a){this._0=a},isValidated:function(b,c){this._0.subscribe(function(a){b.call(c||null,a._4._s())})},responseArrives:function(a,b){if(!this._0._a)return;if(b)a=a.bind(b);this._0._e=a}});var w=Class.create({initialize:function(a){this._0=a},isValidated:function(a){this._0._f.push(a)}});var n=Class.create({initialize:function(a){this._g=[];this._b=this._b.bindAsEventListener(this);this._A=a;this._5();this._3={};this._j=[];this._f=[];this._8=new j(this);this._z=new v(this);this._r=new w(this)},subscribe:function(a,b){this._g.push({_m:a,_p:b||null})},notifyObservers:function(){var b=$A(arguments);this._g.each(function(a){a._m.apply(a._p,b)})},_5:function(){if(this._k())return false;this._6={};this._i={};this._9={};this._0=$(this._A);if(!this._k())return false;this._0.observe('submit',this._b);for(var a in this._3)this._3[a]._5();return true},_k:function(){return this._0&&this._0.match('body form')},_n:function(a){return this._3[a]||(this._3[a]=new x(this,a))},_b:function(a){var b=this._l();if(this._a||!b)Event.stop(a);if(!this._a||!b)return;var c=this._0;new Ajax.Request(c.action,{method:c.method||'post',parameters:this._q,onSuccess:this._e})},_e:function(a){},_7:function(c){if(this._6[c])return this._6[c];if(!this._0)return[];return this._6[c]=this._0.descendants().findAll(function(a){var b=a.match('input, textarea, select');return b&&(c?(a.name==c):true)})},_h:function(a){if(a.name)a=a.name;return this._i[a]||(this._i[a]=u(this._7(a)[0]))},_t:function(d){if(this._9[d])return this._9[d];var f=this._h(d);var e=((f||{}).innerHTML||d).stripTags().strip();e=e.replace(/(\w)[_-](\w)/g,'$1 $2').replace(/([a-z])([A-Z])/g,function(a,b,c){return b+' '+c.toLowerCase()});return this._9[d]=e.charAt(0).toUpperCase()+e.substring(1)},_u:function(){return this._q=p(this._0)},_v:function(){this._4=new y(this);var b=this._u(),c,d;this._f.each(function(a){a(b)});for(c in b)q(this._7(c),b[c]);b=new z(b);for(c in this._3)this._3[c]._w(b.get(c),b);this._j.each(function(a){a(b,this._4)},this);var f=this._4._x();for(c in this._6)[this._7(c),[this._h(c)]].invoke('each',function(a){if(!a)return;a[f.include(c)?'addClassName':'removeClassName']('invalid')});this.notifyObservers(this)},_l:function(){this._v();return this._4._y()==0}});var x=Class.create({initialize:function(a,b){this._0=a;this._c=b;this._d=[];this._8=new m(this);this._5()},_5:function(){this._o=this._0._7(this._c)},_2:function(a){this._d.push(a)},_w:function(f,e){var g=[],B=this._d.length?this._d:[o],f=f||'';B.each(function(a){var b=a(f,e),c,d;if(b!==true){c=b[0];d=b[1]||this._c;this._0._4.register(this._c);this._0._4.add(d,c)}},this);return g.length?g:true}});var z=Class.create({initialize:function(b){this.get=function(a){return b[a]===undefined?null:b[a]}}});var y=Class.create({initialize:function(f){var e={},g=[];Object.extend(this,{register:function(a){e[a]=e[a]||[]},add:function(a,b){this.register(a);e[a].push(b)},addToBase:function(a){g.push(a)},_y:function(){var a=g.length;for(var b in e)a+=e[b].length;return a},_s:function(){var b,c=g.map(function(a){return{field:null,message:a}});for(var d in e){b=f._t(d);e[d].each(function(a){c.push({field:d,message:b+' '+a})})}return c},_x:function(){var a=[];for(var b in e)a.push(b);return a}})}});return k})();